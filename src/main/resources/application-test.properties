# =======================================================
# CONFIGURAÇÃO: TEST (Testes de Integração)
# =======================================================

# Configurações do Banco de Dados TEST
# É altamente recomendado usar um banco de dados de teste separado.
spring.datasource.url=jdbc:postgresql://localhost:5432/test
spring.datasource.username=postgres
spring.datasource.password=postgres

# Configuração DDL/Hibernate
# 'create-drop': Limpa e recria TODO o schema antes da execução dos testes e o destrói depois.
# OBRIGATÓRIO para garantir o ISOLAMENTO dos testes (resolve o erro de chave duplicada).
spring.jpa.hibernate.ddl-auto=none

# =======================================================
# CONFIGURAÇÃO FLYWAY (CORREÇÃO DO ERRO)
# =======================================================
# Habilita o comando Clean (necessário para o clean-before-validation)
spring.flyway.enabled=true
spring.flyway.clean-disabled=false

# =======================================================
# CONFIGURAÇÃO DE LOGS PARA TESTES
# =======================================================

# 1. LOG ROOT (GLOBAL)
# Define o nível de log global para ERROR. Isso elimina a maioria dos logs 
# de INFO/DEBUG do Spring, Hibernate, Tomcat, etc., que não são essenciais 
# para a execução dos testes.
logging.level.root=ERROR 

# 2. LOG FLYWAY (CORREÇÃO DO ERRO VERBOSO)
# Silencia explicitamente o Flyway. Suas mensagens de "Running migration" 
# e de contexto são uma fonte comum de poluição no console de testes.
logging.level.org.flywaydb=ERROR

# 3. LOG DA APLICAÇÃO (OPCIONAL)
# Se você precisar ver logs dentro do seu código (br.com.wta.frete), 
# pode deixá-lo em INFO ou DEBUG, mesmo que o root esteja em ERROR.
logging.level.br.com.wta.frete=INFO